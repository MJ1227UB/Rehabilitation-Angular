<div class="container">
  <div *ngIf="evaluationMode; then ClientEvaluations else ManageClients"></div>

  <!--Normal Manage Clients View-->
  <ng-template #ManageClients>
    <div class="row">
      <!--Clients list-->
      <div class="col-md-4">
        <rehab-manage-clients-list (clientSelected)="selectedClient = $event"></rehab-manage-clients-list>
      </div>

      <!--Clients detail-->
      <div class="col-md-8">
        <rehab-manage-clients-detail *ngIf="selectedClient"
                                     (clientDeleted)="deleteClient()"
                                     (evaluationsClicked)="evaluationMode = true; loadClientMilestones()"
                                     [currentClient]="selectedClient"></rehab-manage-clients-detail>
      </div>
    </div>
  </ng-template>

  <!--Client Evaluations View-->
  <ng-template #ClientEvaluations>
    <button class="btn btn-primary clickable" (click)="setEvaluationMode(false); resetData()">Back</button>
    <div class="row">
      <div class="col-md-3">
        <!--MILESTONES-->
        <rehab-milestone-list (milestoneSelected)="onSelectedMilestone($event)"
                              (milestoneCreated)="addMilestone($event)"
                              [milestones]="milestones"></rehab-milestone-list>
      </div>
      <div class="col-md-3">
        <!--VISITS-->
        <rehab-visit-list *ngIf="selectedMilestone"
                          (visitAdded)="addVisitToMilestone($event)"
                          [allVisits]="selectedMilestone?.visits"
                          (visitSelected)="selectedVisit = $event"
                          [currentVisit]="selectedVisit"></rehab-visit-list>
      </div>
      <div class="col-md-6">
        <!--Milestone Detail-->
        <rehab-milestone-detail *ngIf="selectedVisit"
                                (deletedVisit)="removeVisitFromMilestone()"
                                [currentVisit]="selectedVisit"
                                [title]="selectedMilestone.title"
                                [purpose]="selectedMilestone.purpose"
                                (updateEvaluation)="updateMilestone($event)"
                                [note]="selectedVisit.note"></rehab-milestone-detail>
      </div>
    </div>
  </ng-template>
</div>
